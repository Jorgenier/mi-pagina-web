<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi Tienda | Muebles y Decoración</title>

  <!-- SEO básico (ajusta url/image cuando publiques) -->
  <meta name="description" content="Compra cabeceros, mesitas y sillas modernas hechas a mano en Tenerife. Envío rápido y diseño premium.">
  <meta name="author" content="Mi Tienda de Muebles">
  <meta property="og:title" content="Mi Tienda de Muebles | Diseño artesanal desde Tenerife">
  <meta property="og:description" content="Descubre nuestros muebles modernos con envío rápido y diseño exclusivo.">
  <meta property="og:image" content="img/banner.jpg">
  <link rel="icon" href="img/favicon.png" type="image/png">

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="header-inner container">
      <!-- Botón hamburguesa corregido -->
      <button id="btn-hamburger" class="hamburger" aria-label="Abrir menú" aria-expanded="false" type="button">
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </button>

      <a class="brand" href="index.html">
        <img src="img/logo.png" alt="Mi Tienda" class="logo">
        <span class="brand-text">ALFAcam</span>
      </a>

      <a href="carrito.html" class="carrito-icono" aria-label="Ver carrito">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 3h2l.4 2M7 13h10l4-8H5.4" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="10" cy="20" r="1" fill="#111"/>
          <circle cx="18" cy="20" r="1" fill="#111"/>
        </svg>
        <span id="contador-carrito" aria-live="polite">0</span>
      </a>
    </div>
  </header>

  <!-- START: panel lateral hamburguesa -->
  <nav id="nav-panel" class="nav-panel" aria-hidden="true" role="dialog" aria-label="Menú principal">
    <div class="nav-panel-inner">
      <button id="btn-close-nav" class="nav-close" aria-label="Cerrar menú" type="button">&times;</button>

      <div class="nav-top">
        <a href="index.html" class="nav-logo">
          <img src="img/logo.png" alt="Mi Tienda" />
        </a>
      </div>

      <ul class="nav-list" role="menu">
        <li class="nav-item"><a href="index.html" class="nav-link">Inicio</a></li>

        <li class="nav-item has-children">
          <button class="nav-link nav-toggle" aria-expanded="false" aria-controls="sub-catalogo" type="button">Catálogo</button>
          <ul id="sub-catalogo" class="nav-sub" role="menu" hidden>
            <li><a href="#catalogo" class="nav-sublink">Cabeceros</a></li>
            <li><a href="#catalogo" class="nav-sublink">Mesitas</a></li>
            <li><a href="#catalogo" class="nav-sublink">Sillas</a></li>
            <li><a href="mobiliario.html" class="nav-sublink">Ver todo en mobiliario</a></li>
          </ul>
        </li>

        <li class="nav-item"><a href="#catalogo" class="nav-link">Ofertas</a></li>
        <li class="nav-item"><a href="#contacto" class="nav-link">Contacto</a></li>
      </ul>

      <div class="nav-footer">
        <a href="#catalogo" class="btn-primary">Ver catálogo</a>
      </div>
    </div>

    <div id="nav-overlay" class="nav-overlay" tabindex="-1"></div>
  </nav>
  <!-- END: panel lateral hamburguesa -->

  <!-- HERO / BANNER -->
  <section class="hero" role="banner">
    <img src="img/banner.jpg" alt="Promoción destacada" class="hero-bg">
    <div class="hero-texto container">
      <h1>Descubre nuestros muebles desde 19,95 €</h1>
      <a href="#catalogo" class="boton-hero">Ver catálogo</a>
    </div>
  </section>

  <!-- CATEGORÍAS DESTACADAS -->
  <section class="categorias container" aria-label="Categorías destacadas">
    <div class="cartel-ofertas">
      <h2>Las Ofertas mas top de noviembre</h2>
    </div>
    <div class="grid-categorias">
      <article class="categoria">
        <div class="fondo-categoria" style="background-image: url('img/frente.jpg');"></div>
        <div class="contenido-categoria">
          <h3>Cabeceros desde 99,95 €</h3>
          <a href="#catalogo" class="ver-todas" data-category="cabeceros">Ver todas</a>
        </div>
      </article>

      <article class="categoria">
        <div class="fondo-categoria" style="background-image: url('img/lado.jpg');"></div>
        <div class="contenido-categoria">
          <h3>Mesitas desde 99,95 €</h3>
          <a href="#catalogo" class="ver-todas" data-category="mesitas">Ver todas</a>
        </div>
      </article>

      <article class="categoria todo-ancho">
        <div class="fondo-categoria" style="background-image: url('img/frente.jpg');"></div>
        <div class="contenido-categoria">
          <h3>Sillas desde 99,95 €</h3>
          <a href="#catalogo" class="ver-todas" data-category="sillas">Ver todas</a>
        </div>
      </article>
    </div>
  </section>

  <main class="main-wrap container" id="main">
    <!-- PRODUCTOS / CATÁLOGO -->
    <section id="catalogo" class="productos" aria-label="Catálogo">
      <h2 class="seccion-title">Productos destacados</h2>

      <div class="busqueda">
        <input type="text" id="buscador" placeholder="Buscar por nombre o precio" oninput="buscarProductos()" />
      </div>

      <div class="filtros" role="tablist" aria-label="Filtros de categoría">
        <button onclick="filtrar('todos')">Todos</button>
        <button onclick="filtrar('cabeceros')">Cabeceros</button>
        <button onclick="filtrar('mesitas')">Mesitas de noche</button>
        <button onclick="filtrar('sillas')">Sillas</button>
      </div>

      <div class="grid" id="grid-productos" aria-live="polite">
        <article class="producto cabeceros" data-id="cabecero-140-01" data-visible="true">
          <span class="etiqueta">Nuevo</span>
          <a href="producto-cabecero.html" class="producto-link" aria-label="Cabecero moderno">
            <img src="img/frente.jpg" alt="Cabecero moderno">
            <h3>Cabecero moderno</h3>
            <p class="medidas">Medidas: 140 x 70 x 4 cm</p>
            <p class="precio">300,00 €</p>
            <p class="entrega">Entrega en 6 - 8 días</p>
          </a>
          <button class="btn-add" onclick="agregarAlCarrito('cabecero-140-01','Cabecero moderno',300.00,'img/cabecero1.jpg')">Añadir al carrito</button>
        </article>

        <article class="producto mesitas" data-id="mesita-45-01" data-visible="true">
          <a href="producto-mesita.html" class="producto-link" aria-label="Mesita de noche moderna">
            <img src="img/lado.jpg" alt="Mesita de noche moderna">
            <h3>Mesita de noche moderna</h3>
            <p class="medidas">Medidas: 45 x 40 x 40 cm</p>
            <p class="precio">120,00 €</p>
            <p class="entrega">Entrega en 6 - 8 días</p>
          </a>
          <button class="btn-add" onclick="agregarAlCarrito('mesita-45-01','Mesita de noche moderna',120.00,'img/mesita1.jpg')">Añadir al carrito</button>
        </article>

        <article class="producto sillas" data-id="silla-50-01" data-visible="true">
          <span class="etiqueta">Nuevo</span>
          <a href="producto-silla.html" class="producto-link" aria-label="Silla moderna">
            <img src="img/frente.jpg" alt="Silla moderna">
            <h3>Silla moderna</h3>
            <p class="medidas">Medidas: 50 x 45 x 90 cm</p>
            <p class="precio">75,00 €</p>
            <p class="entrega">Entrega en 6 - 8 días</p>
          </a>
          <button class="btn-add" onclick="agregarAlCarrito('silla-50-01','Silla moderna',75.00,'img/silla1.jpg')">Añadir al carrito</button>
        </article>
      </div>
    </section>

    <!-- GALERÍA SOCIAL / INSPIRACIÓN -->
    <section class="galeria-social" aria-label="Inspiración y trabajos recientes">
      <h2 class="seccion-title">Inspiración y trabajos recientes</h2>
      <div class="grid-social">
        <img src="img/cabecero1.jpg" alt="Cabecero en dormitorio moderno" tabindex="0">
        <img src="img/frente.jpg" alt="Detalle de costura artesanal" tabindex="0">
        <img src="img/lado.jpg" alt="Mesita de noche en ambiente real" tabindex="0">
        <img src="img/frente.jpg" alt="Silla moderna en comedor" tabindex="0">
        <img src="img/lado.jpg" alt="Cliente feliz con su cabecero" tabindex="0">
      </div>
    </section>

    <!-- RESEÑAS -->
    <section class="reseñas" aria-label="Reseñas de clientes">
      <h2 class="seccion-title">Lo que dicen nuestros clientes</h2>
      <div class="reseña">
        <div class="estrellas" aria-hidden="true">*****</div>
        <p><strong>Verificado</strong> - Envío rápido y sencillo, muy fácil de montar y queda muy bien.</p>
      </div>
      <div class="reseña">
        <div class="estrellas" aria-hidden="true">*****</div>
        <p><strong>Verificado</strong> - Excepcional calidad y diseño, encantados con el resultado.</p>
      </div>
      <div class="trustpilot-mini">
        <p>TrustScore 3.5 sobre 5 basado en 7.084 opiniones</p>
        <img src="img/trustpilot.png" alt="Trustpilot" width="100">
      </div>
    </section>

    <!-- NEWSLETTER -->
    <section class="newsletter" aria-label="Suscripción newsletter">
      <h2>¡Suscríbete y llévate 10€ de regalo!</h2>
      <p>Recibe novedades y descuentos exclusivos.</p>
      <form class="form-newsletter" onsubmit="event.preventDefault(); alert('Gracias por suscribirte');">
        <input type="email" placeholder="Escribe tu correo" required>
        <button type="submit">SUSCRÍBETE</button>
      </form>
      <label class="legal-check">
        <input type="checkbox" required> Estoy de acuerdo con la política de privacidad.
      </label>
    </section>
  </main>

  <!-- MODAL PARA GALERÍA -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true" aria-label="Imagen ampliada">
    <button class="cerrar" onclick="cerrarModal()" aria-label="Cerrar modal">x</button>
    <img id="modal-img" src="" alt="">
  </div>

  <!-- FOOTER PROFESIONAL -->
  <footer class="footer-pro" role="contentinfo">
    <div class="footer-grid container">
      <div class="footer-col">
        <h4>SOBRE NOSOTROS</h4>
        <ul>
          <li><a href="#">Quiénes somos</a></li>
          <li><a href="#">Compromisos éticos</a></li>
          <li><a href="#">Condiciones generales</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>ENLACES DE INTERÉS</h4>
        <ul>
          <li><a href="#">Envíos</a></li>
          <li><a href="#">Devoluciones y cambios</a></li>
          <li><a href="#">Garantía</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>CONTACTO Y AYUDA</h4>
        <ul>
          <li><a href="#">Horario atención</a></li>
          <li><a href="#">Estado de pedido</a></li>
          <li><a href="#">Preguntas frecuentes</a></li>
        </ul>
      </div>

      <div class="footer-col footer-trust">
        <h4>OPINIONES</h4>
        <p class="trust-score">TrustScore <strong>3.5</strong> | 7.084 opiniones</p>
        <img src="img/trustpilot.png" alt="Trustpilot" class="trust-img">
      </div>
    </div>

    <div class="footer-pagos container">
      <div class="pagos-inner">
        <img src="img/visa.png" alt="VISA">
        <img src="img/mastercard.png" alt="MasterCard">
        <img src="img/paypal.png" alt="PayPal">
      </div>
    </div>

    <div class="footer-copy container">
      <p>@2025 Mi Tienda | Todos los derechos reservados</p>
    </div>
  </footer>

  <!-- SCRIPT GLOBAL (menú, filtrado, búsqueda, modal, carrito) -->
  <script>
  /* ===== Menú hamburguesa corregido ===== */
  (function(){
    const btn = document.getElementById('btn-hamburger');
    const panel = document.getElementById('nav-panel');
    const overlay = document.getElementById('nav-overlay');
    const closeBtn = document.getElementById('btn-close-nav');

    function openNav() {
      if (!panel || !btn) return;
      panel.classList.add('open');
      panel.setAttribute('aria-hidden','false');
      btn.classList.add('open');
      btn.setAttribute('aria-expanded','true');
      document.documentElement.classList.add('nav-open');
      document.body.classList.add('nav-open');
    }

    function closeNav() {
      if (!panel || !btn) return;
      panel.classList.remove('open');
      panel.setAttribute('aria-hidden','true');
      btn.classList.remove('open');
      btn.setAttribute('aria-expanded','false');
      document.documentElement.classList.remove('nav-open');
      document.body.classList.remove('nav-open');
      btn.focus();
    }

    if (btn) btn.addEventListener('click', () => {
      const isOpen = panel && panel.classList.contains('open');
      isOpen ? closeNav() : openNav();
    });
    if (overlay) overlay.addEventListener('click', closeNav);
    if (closeBtn) closeBtn.addEventListener('click', closeNav);

    // Accordion for submenus
    document.querySelectorAll('.nav-toggle').forEach(button => {
      button.addEventListener('click', () => {
        const targetId = button.getAttribute('aria-controls');
        const sub = document.getElementById(targetId);
        const expanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', String(!expanded));
        if (!sub) return;
        if (expanded) {
          // close
          sub.style.height = sub.scrollHeight + 'px';
          requestAnimationFrame(() => {
            sub.style.transition = 'height .22s ease';
            sub.style.height = '0px';
          });
          sub.addEventListener('transitionend', function te() {
            sub.hidden = true;
            sub.style.height = '';
            sub.style.transition = '';
            sub.removeEventListener('transitionend', te);
          });
        } else {
          // open
          sub.hidden = false;
          const h = sub.scrollHeight;
          sub.style.height = '0px';
          requestAnimationFrame(() => {
            sub.style.transition = 'height .22s ease';
            sub.style.height = h + 'px';
          });
          sub.addEventListener('transitionend', function te() {
            sub.style.height = '';
            sub.style.transition = '';
            sub.removeEventListener('transitionend', te);
          });
        }
      });
    });

    // Close on Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && panel && panel.classList.contains('open')) closeNav();
    });
  })();

  /* ===== Filtrado y búsqueda (corrige typos importantes) ===== */
  function filtrar(categoria) {
    const productos = document.querySelectorAll('.producto');
    productos.forEach(producto => {
      producto.dataset.visible = (categoria === 'todos' || producto.classList.contains(categoria)) ? 'true' : 'false';
    });
    aplicarBusqueda();
  }

  function buscarProductos() {
    aplicarBusqueda();
  }

  function aplicarBusqueda() {
    const textoRaw = (document.getElementById('buscador') && document.getElementById('buscador').value) || "";
    const texto = textoRaw.toLowerCase().trim();
    const productos = document.querySelectorAll('.producto');

    productos.forEach(producto => {
      const visiblePorCategoria = producto.dataset.visible !== 'false';
      const nombreEl = producto.querySelector('h3') || producto.querySelector('h4') || (producto.querySelector('.producto-link h3'));
      const nombre = nombreEl ? (nombreEl.textContent || "").toLowerCase() : "";
      const precioEl = producto.querySelector('.precio');
      const precioTexto = precioEl ? (precioEl.textContent || "").replace(/[^\d,\.]/g, "") : "";
      const precioMatch = precioTexto.match(/(\d+)[,.]?(\d{0,2})?/);
      const precio = precioMatch ? parseFloat(precioMatch[1] + '.' + (precioMatch[2] || '00')) : NaN;
      const textoEsNumero = texto !== "" && !isNaN(parseFloat(texto.replace(',', '.')));
      const coincideNombre = texto === "" ? true : nombre.includes(texto);
      const coincidePrecio = textoEsNumero && !isNaN(precio) && precio <= parseFloat(texto.replace(',', '.'));

      if (!visiblePorCategoria) {
        producto.classList.add('oculto');
      } else if ((coincideNombre || coincidePrecio)) {
        producto.classList.remove('oculto');
      } else {
        producto.classList.add('oculto');
      }
    });
  }

  /* ===== Modal galería ===== */
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modal-img');
  document.querySelectorAll('.grid-social img').forEach(img => {
    img.addEventListener('click', () => abrirModal(img));
    img.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        abrirModal(img);
      }
    });
  });

  function abrirModal(img) {
    if (!modal || !modalImg) return;
    modal.style.display = 'flex';
    modal.setAttribute('aria-hidden', 'false');
    modalImg.src = img.src;
    modalImg.alt = img.alt || "";
    modal.querySelector('.cerrar')?.focus();
  }

  function cerrarModal() {
    if (!modal || !modalImg) return;
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    modalImg.src = "";
    modalImg.alt = "";
  }

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal && modal.style.display === 'flex') cerrarModal();
  });

  /* ===== Carrito (localStorage) ===== */
  function agregarAlCarrito(id, nombre, precio, imagen) {
    const producto = { id, nombre, precio: Number(precio), imagen };
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const idx = carrito.findIndex(p => p.id === id);
    if (idx > -1) {
      carrito[idx].cantidad = (carrito[idx].cantidad || 1) + 1;
    } else {
      producto.cantidad = 1;
      carrito.push(producto);
    }
    localStorage.setItem('carrito', JSON.stringify(carrito));
    actualizarContadorCarrito();
    mostrarToast('Añadido al carrito');
  }

  function actualizarContadorCarrito() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const totalCant = carrito.reduce((s, it) => s + (Number(it.cantidad) || 0), 0);
    const contador = document.getElementById('contador-carrito');
    if (contador) contador.textContent = totalCant;
  }

  function mostrarToast(texto) {
    let toast = document.getElementById('toast-carrito');
    if (!toast) {
      toast = document.createElement('div');
      toast.id = 'toast-carrito';
      toast.style.position = 'fixed';
      toast.style.right = '16px';
      toast.style.bottom = '18px';
      toast.style.background = 'rgba(0,0,0,0.8)';
      toast.style.color = '#fff';
      toast.style.padding = '8px 12px';
      toast.style.borderRadius = '8px';
      toast.style.zIndex = '2000';
      toast.style.fontSize = '0.95rem';
      toast.style.transition = 'opacity .25s';
      document.body.appendChild(toast);
    }
    toast.textContent = texto;
    toast.style.opacity = '1';
    clearTimeout(toast._t);
    toast._t = setTimeout(()=>{ toast.style.opacity='0'; }, 1500);
  }

  /* Inicialización */
  document.addEventListener('DOMContentLoaded', () => {
    actualizarContadorCarrito();

    document.querySelectorAll('.ver-todas').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const cat = link.dataset.category || 'todos';
        filtrar(cat);
        marcarFiltroActivo(cat);
        history.replaceState(null, "", '#catalogo?categoria=' + encodeURIComponent(cat));
        const catalogo = document.getElementById('catalogo');
        if (catalogo) {
          const header = document.querySelector('header');
          const headerHeight = header ? header.getBoundingClientRect().height : 0;
          const top = catalogo.getBoundingClientRect().top + window.scrollY - headerHeight - 12;
          window.scrollTo({ top, behavior: 'smooth' });
        }
      });
    });
  });

  function marcarFiltroActivo(categoria) {
    document.querySelectorAll('.filtros button').forEach(btn => btn.classList.remove('activo'));
    const btn = Array.from(document.querySelectorAll('.filtros button')).find(b => {
      return (b.dataset && b.dataset.category === categoria) || (b.textContent && b.textContent.toLowerCase().includes(categoria));
    });
    if (btn) btn.classList.add('activo');
  }
  </script>
</body>
</html>